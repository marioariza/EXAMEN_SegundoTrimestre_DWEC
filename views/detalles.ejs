<%- include("template/cabecera", {tituloWeb: 'F칩rmula 1 | Crear Piloto'})%>

<div class="container">
    <h1>Detalles del piloto</h1>
    <% if (error) { %>
    <%= mensaje %>
    <a href="/"class="btn btn-dark btn-block my-2"> Volver</a>
    <% } %>
    <% if (!error) { %>
    <table class="table">
    <thead>
    <tr>
    <th scope="col">#</th>
    <th scope="col">Nombre</th>
    <th scope="col">Tipo</th>
    <th scope="col">Descripci칩n</th>
    <th scope="col">Acci칩n</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <tr>
            <th scope="row"><%= piloto.id %></th>
            <td><%= piloto.nombre %></td>
            <td><%= piloto.edad %> a침os</td>
            <td><%= piloto.nacionalidad %></td>
            <td><%= piloto.numParrilla %></td>
            <td><%= piloto.numCarreras %></td>
            <td><%= piloto.numVictorias %></td>
            <td><%= piloto.numPodios %></td>
            <td><%= piloto.equipoActual %></td>
    <td>
    <button class="btn btn-danger btn-sm"
    data-id="<%= piloto._id %>" id="eliminar">Eliminar</button>
    </td>
    </tr>
    </tbody>
    </table>
    <% } %>
    </div>

<script>
    const btnEliminar = document.getElementById('eliminar')
    btnEliminar.addEventListener('click', async () => {
        console.log(btnEliminar.dataset.id)
        try {
            const data = await fetch(`/${btnEliminar.dataset.id}`, {
                method: 'delete'
            })
            const res = await data.json()
            console.log(res)
            if (res.estado) {
                window.location.href = '/'
            } else {
                console.log(res)
            }
        } catch (error) {
            console.log(error)
        }
    })
</script>